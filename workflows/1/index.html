<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Professional AI Chatbot Integration Guide | دليل احترافي لربط الشات بوت</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #F8F9FA;
            --primary-text: #212529;
            --secondary-text: #495057;
            --accent-color-1: #48BFE3;
            --accent-color-2: #5390D9;
            --card-bg: #ffffff;
            --shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
            --border-radius: 12px;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-color);
            color: var(--primary-text);
            line-height: 1.9;
            margin: 0;
            padding: 0;
            direction: rtl;
        }

        .container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 20px;
        }

        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--accent-color-2), var(--accent-color-1));
            border-radius: var(--border-radius);
            margin-bottom: 60px;
        }

        .hero h1 {
            font-size: 3.2rem;
            font-weight: 900;
            color: white;
            margin: 0;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.15);
        }

        .hero p {
            font-size: 1.3rem;
            color: white;
            opacity: 0.95;
            max-width: 750px;
            margin: 15px auto 0;
        }

        h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            color: var(--accent-color-2);
            margin-top: 60px;
            margin-bottom: 20px;
            border-bottom: 3px solid #dee2e6;
            padding-bottom: 15px;
        }

        .section-intro {
            text-align: center;
            font-size: 1.15rem;
            color: var(--secondary-text);
            max-width: 80%;
            margin: 0 auto 50px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 35px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }

        .card h3 {
            font-size: 1.7rem;
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--primary-text);
        }
        
        .step-number {
            background-color: var(--accent-color-1);
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            float: right;
            margin-left: 20px;
        }

        .card-content {
            overflow: hidden;
        }
        
        .card-content ul {
            padding-right: 20px;
        }

        .tech-term {
            background-color: #e7f5ff;
            color: #1971c2;
            padding: 3px 10px;
            border-radius: 7px;
            font-weight: 600;
            cursor: help;
            position: relative;
            display: inline-block;
        }

        .tech-term .tooltip {
            visibility: hidden;
            width: 320px;
            background-color: #343a40;
            color: #fff;
            text-align: right;
            border-radius: 6px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 130%;
            left: 50%;
            margin-left: -160px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            line-height: 1.7;
        }

        .tech-term .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #343a40 transparent transparent transparent;
        }

        .tech-term:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            margin: 25px 0;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1rem;
            direction: ltr;
            text-align: left;
        }
        
        .code-block .highlight {
            color: #f6ad55;
            font-weight: bold;
        }

        .skool-note {
            background-color: #fff3cd;
            border-right: 5px solid #ffc107;
            padding: 20px;
            margin-top: 25px;
            border-radius: 8px;
        }
        .skool-note p {
            margin: 0;
            font-weight: 600;
            color: #856404;
        }
        .skool-note a {
            color: #856404;
            font-weight: 700;
            text-decoration: none;
        }
        .skool-note a:hover {
            text-decoration: underline;
        }

        .final-note {
            text-align: center;
            padding: 40px;
            background-color: #e9ecef;
            border-radius: var(--border-radius);
            margin-top: 50px;
        }

        .final-note h3 {
            color: var(--primary-text);
            font-size: 1.8rem;
            margin: 0 0 10px 0;
        }
        
        .final-note p {
            color: var(--secondary-text);
            font-size: 1.1rem;
            margin: 0;
        }

    </style>
</head>
<body>

    <div class="container">

        <header class="hero">
            <h1>دليل لربط الشات بوت بموقعك </h1>
            <p>هذا الدليل يوفر شرحًا تقنيًا وخطوات عملية لإعداد نظام شات بوت متكامل باستخدام n8n.</p>
        </header>

        <main>

            <div class="card">
                <div class="step-number">1</div>
                <div class="card-content">
                    <h3>الخطوة الأولى: (Import Workflow)</h3>
                     <p>قبل البدء، يجب أولاً استيراد worflow الجاهز إلى حساب n8n الخاص بك. اتبع الخطوات التالية:</p>
                        <ul>
                            <li>قم بتسجيل الدخول إلى حساب n8n الخاص بك.</li>
                            <li>من لوحة التحكم الرئيسية، انقر على "Add workflow".</li>
                            <li>في لوحة العمل الجديدة، انقر على قائمة النقاط الثلاث (⋮) في الزاوية العلوية اليمنى.</li>
                            <li>اختر "Import from file" من القائمة المنسدلة.</li>
                            <li>حدد ملف <code>CHAT_BOT.json</code> من جهاز الكمبيوتر الخاص بك لتحميله.</li>
                        </ul>
                    <div class="skool-note">
                        <p>للحصول على شرح مرئي مفصل لهذه الخطوة، يرجى الرجوع إلى قسم "Node Setup" في منصة Skool التعليمية.</p>
                    </div>
                </div>
            </div>

            <h2>فهم مكونات نظام الشات بوت</h2>
            <p class="section-intro">
                لتحقيق التكامل الناجح، من الضروري فهم كل مكون في سير العمل (Workflow). يتكون هذا النظام من عدة عقد (Nodes) مترابطة، كل منها يؤدي وظيفة محددة.
            </p>

            <div class="card">
                <h3>1. نقطة البداية: <span class="tech-term">Chat Trigger<span class="tooltip">هذا المشغل (Trigger) هو المسؤول عن بدء الـ Workflow. يقوم بإنشاء Webhook URL فريد يستمع للرسائل الواردة من واجهة الشات على موقعك، وعند وصول رسالة، يقوم بتفعيل سير العمل وتمرير بيانات الرسالة.</span></span></h3>
                <p>هذه هي بوابة الدخول للـ Workflow. العقدة المسماة <code>When chat message received</code> تولد <span class="tech-term">Webhook URL<span class="tooltip">هو عنوان URL فريد يعمل كواجهة برمجة تطبيقات (API) مصغرة. عند إرسال طلب HTTP (مثل رسالة دردشة) إلى هذا العنوان، يتم تشغيل عملية محددة على الخادم، في حالتنا هذه، يتم تشغيل n8n Workflow.</span></span> الذي يستقبل البيانات (رسائل المستخدم) من واجهة الدردشة على موقع الويب الخاص بك. أي رسالة يرسلها المستخدم تبدأ رحلتها من هنا.</p>
            </div>

            <div class="card">
                <h3>2. الوحدة المنطقية: <span class="tech-term">AI Agent<span class="tooltip">العميل الذكي هو عقدة متقدمة تعمل كمنسق. تستخدم نموذج لغة (LLM) لفهم النية (Intent) من وراء رسالة المستخدم، وتستخدم أدوات (Tools) لتنفيذ مهام، وتعتمد على ذاكرة (Memory) للحفاظ على سياق المحادثة.</span></span></h3>
                <p>هذه العقدة هي العقل المركزي للنظام. يتم تكوينها عبر "System Message" لتحديد سلوكها، أهدافها، والقيود المفروضة عليها. هي المسؤولة عن تحليل نية المستخدم، استخلاص الكيانات (Entities) مثل الاسم ورقم الهاتف، واتخاذ قرار بشأن الإجراء التالي، سواء كان الرد على استفسار أو استخدام أداة (Tool) لحفظ البيانات.</p>
            </div>

            <div class="card">
                <h3>3. محرك المعالجة اللغوية: <span class="tech-term">Language Model (LLM)<span class="tooltip">نموذج اللغة الكبير هو شبكة عصبية تم تدريبها على كميات هائلة من البيانات النصية. وظيفته هي فهم وتوليد نص شبيه بالبشر، مما يمكن الـ AI Agent من إجراء محادثات طبيعية ومنطقية.</span></span></h3>
                <p>يعمل هذا النموذج، مثل Google Gemini، كمحرك للـ AI Agent. يقوم بمعالجة مدخلات المستخدم وسياق المحادثة لإنشاء استجابات متماسكة وذات صلة. جودة هذا النموذج تؤثر بشكل مباشر على مدى "ذكاء" و "طبيعية" الشات بوت.</p>
            </div>
            
            <div class="card">
                <h3>4. وحدة الذاكرة: <span class="tech-term">Memory<span class="tooltip">في هذا السياق، الذاكرة هي آلية لتخزين تاريخ المحادثة (الرسائل السابقة للمستخدم والبوت). يتم إرسال هذا التاريخ مع كل طلب جديد إلى الـ LLM، مما يسمح له بفهم السياق الكامل وتجنب تكرار الأسئلة.</span></span></h3>
                <p>للحفاظ على سياق المحادثة، نستخدم عقدة الذاكرة. تقوم هذه الوحدة بتخزين التفاعلات الأخيرة بين المستخدم والشات بوت. هذا ضروري للمحادثات متعددة الأدوار (multi-turn conversations) حيث يتم جمع المعلومات على عدة خطوات.</p>
            </div>

            <div class="card">
                <h3>5. أداة تخزين البيانات: <span class="tech-term">Google Sheets Tool<span class="tooltip">الأداة (Tool) هي وظيفة محددة يمكن للـ AI Agent استدعاؤها. في هذه الحالة، أداة Google Sheets تسمح للـ Agent بالتفاعل مع Google Sheets API لإجراء عمليات مثل إضافة صف جديد (Append) أو تحديث صف موجود (Update).</span></span></h3>
                <p>عندما يقرر الـ AI Agent أنه قد جمع كل البيانات المطلوبة (الاسم، الهاتف، إلخ)، فإنه يستدعي هذه الأداة. تقوم العقدة بتنسيق البيانات وإرسالها إلى Google Sheets API لإضافتها كصف جديد في جدول البيانات المحدد، مما يؤدي إلى أتمتة عملية حفظ بيانات العملاء.</p>
            </div>

            <h2>خطوات إعداد وتثبيت النظام</h2>
            <p class="section-intro">
                الآن، اتبع هذه الخطوات الفنية بدقة لإعداد سير العمل في حساب n8n الخاص بك وربطه بموقعك.
            </p>

            <div class="card">
                <div class="step-number">2</div>
                <div class="card-content">
                    <h3>الخطوة الثانية: إعداد الاعتمادات (Credentials)</h3>
                    <p>
                        بعد استيراد سير العمل، يجب عليك تكوين الاعتمادات (Credentials) للعقد التي تتطلب مصادقة للوصول إلى خدمات خارجية:
                        <ul>
                            <li><strong>Google Gemini Node:</strong> قم بتوفير مفتاح <span class="tech-term">API Key<span class="tooltip">مفتاح واجهة برمجة التطبيقات هو سلسلة فريدة من الأحرف تستخدم لمصادقة الطلبات إلى خدمة ما. إنه يضمن أن الطلبات تأتي من مستخدم مصرح له ويسمح بتتبع الاستخدام.</span></span> الخاص بك للوصول إلى خدمات Google Studio AI.</li>
                            <li><strong>Google Sheets Node:</strong> قم بإجراء مصادقة <span class="tech-term">OAuth2<span class="tooltip">هو معيار تفويض مفتوح يسمح للتطبيقات بالحصول على وصول محدود إلى حسابات المستخدمين على خدمات HTTP مثل Google. إنه يوفر وصولاً آمناً ومفوضاً دون الحاجة إلى مشاركة كلمة المرور مباشرة.</span></span> عن طريق ربط حساب Google الخاص بك، ثم حدد جدول البيانات والورقة (Sheet) التي سيتم استخدامها لتخزين البيانات.</li>
                        </ul>
                    </p>
                    <div class="skool-note">
                        <p>للحصول على شرح مرئي مفصل لهذه الخطوة، يرجى الرجوع إلى قسم "Node Setup" في منصة Skool التعليمية.</p>
                    </div>
                </div>
            </div>

           <div class="card">
                <div class="step-number">3</div>
                <div class="card-content">
                    <h3>الخطوة الثالثة: دمج الشات بوت في موقعك بسهولة</h3>
                    <p>
                    هذه هي الخطوة الأخيرة. كل ما عليك فعله هو نسخ كود بسيط إلى موقعك لإظهار الشات بوت. الملف <code>template.html</code> الموجود مع المشروع هو فقط مثال لتوضيح مدى سهولة دمج الشات بوت داخل أي موقع أو متجر إلكتروني.
                    </p>

                    <ol>
                    <li><strong>تفعيل الرابط العام:</strong> في سير العمل داخل n8n، اضغط على عقدة البداية <code>When chat message received</code>. ثم فعّل خيار <strong>"Make Chat Publicly Available"</strong>.</li>
                    
                    <li><strong>نسخ رابط الدردشة:</strong> بعد التفعيل، سيظهر حقل يحتوي على <strong>"Chat URL"</strong>. انسخ هذا الرابط بالكامل.</li>
                    
                    <li><strong>إضافة الكود إلى موقعك:</strong> افتح ملف <code>template.html</code> المرفق كمثال، أو أي ملف HTML خاص بموقعك.</li>
                    
                    <li><strong>الصق كود الشات:</strong> أضف الكود التالي قبل وسم <code>&lt;/body&gt;</code> في صفحتك، مع استبدال الرابط الموجود داخل <code>webhookUrl</code> بالرابط الذي نسخته من n8n.</li>
                    </ol>

                    <div class="code-block">
                    <pre><code class="language-html">
                &lt;!-- Example to embed the chatbot --&gt;
                &lt;script type="module"&gt;
                import { createChat } from "https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js";

                createChat({
                    webhookUrl: <span class="highlight">"YOUR_COPIED_CHAT_URL_HERE"</span>,
                    // ... other configurations
                });
                &lt;/script&gt;
                    </code></pre>
                    </div>

                    <div class="skool-note">
                    <p>📽️ لمزيد من التوضيح المرئي، شاهد قسم "Node Setup" في منصة Skool التعليمية.</p>
                    </div>
  </div>
           </div>

           <div class="final-note">
  <h3>اكتمال الإعداد</h3>
  <p>
    ❗ <strong>ملاحظة:</strong> لتشغيل الشات بوت، قم بتفعيل workflow بالضغط على زر <strong>"Inactive"</strong> في الأعلى داخل منصة n8n حتى يتحول إلى <strong>"Active"</strong>.
  </p>
  <p>
    بإكمال هذه الخطوات، تكون قد قمت بإعداد نظام شات بوت وظيفي بالكامل. قم بتفعيل سير العمل (Activate Workflow) في n8n لاختبار التكامل.
  </p>
           </div>
        </main>

    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step-by-Step Guide: Run n8n Locally with Docker & Ngrok</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
        }
        .rtl body {
            font-family: 'Tajawal', sans-serif;
        }
        .step-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e2e8f0;
        }
        .code-block {
            background-color: #1a202c;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
            position: relative;
            text-align: left;
        }
        .code-block .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
        }
        .rtl .code-block .copy-button {
            right: auto;
            left: 0.5rem;
        }
        .copy-button {
            background-color: #4a5568;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.75rem;
            transition: background-color 0.2s;
        }
        .copy-button:hover {
            background-color: #2d3748;
        }
        .step-number {
            background-color: #4299e1;
            color: white;
            border-radius: 9999px;
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.25rem;
            margin-bottom: 1rem;
            flex-shrink: 0;
        }
        .translate-button {
            background-color: #4299e1;
            color: white;
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .translate-button:hover {
            background-color: #2b6cb0;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12">
             <div class="flex justify-between items-center mb-4">
                <div class="flex-grow text-left rtl:text-right">
                    <h1 class="text-4xl md:text-5xl font-black text-gray-900 tracking-tight" data-translate-key="main_title">Deploy n8n Locally and Share Publicly</h1>
                    <p class="text-xl md:text-2xl text-blue-600 mt-2 font-semibold" data-translate-key="main_subtitle">A Detailed Step-by-Step Guide</p>
                </div>
                <div class="flex-shrink-0 ml-4 rtl:mr-4 rtl:ml-0">
                    <button id="translateBtn" class="translate-button">العربية</button>
                </div>
            </div>
        </header>

        <main class="space-y-12">

            <!-- Step 0: Prerequisites -->
            <section id="prerequisites">
                <div class="step-card">
                    <div class="flex items-start mb-4">
                        <div class="step-number">0</div>
                        <h2 class="text-2xl font-bold text-gray-900 ml-4 rtl:mr-4 rtl:ml-0" data-translate-key="step0_title">Prerequisites: Install Software</h2>
                    </div>
                    <p class="text-gray-600 mb-6" data-translate-key="step0_desc">Before we begin, you need to download and install Docker Desktop and sign up for a free Ngrok account. These tools are the foundation of our setup.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-6 bg-gray-50 rounded-lg border">
                            <h3 class="font-bold text-lg text-gray-800" data-translate-key="docker_title">Docker Desktop</h3>
                            <p class="text-gray-600 my-2" data-translate-key="docker_desc_what"><strong>What it is:</strong> Docker is a platform that puts applications into "containers." Think of a container as a lightweight, standalone package that has everything the application needs to run: code, tools, and settings. This ensures it works the same everywhere.</p>
                            <p class="text-gray-600" data-translate-key="docker_desc_why">The tool to build and run our n8n container. Download the correct version for your operating system (Windows, Mac, or Linux).</p>
                            <a href="https://www.docker.com/products/docker-desktop/" target="_blank" class="text-blue-600 font-semibold mt-2 inline-block">
                                <span data-translate-key="download_docker">Download Docker</span> →
                            </a>
                        </div>
                        <div class="p-6 bg-gray-50 rounded-lg border">
                            <h3 class="font-bold text-lg text-gray-800" data-translate-key="ngrok_title">Ngrok Account</h3>
                            <p class="text-gray-600 my-2" data-translate-key="ngrok_desc_what"><strong>What it is:</strong> Ngrok is a service that creates a secure "tunnel" from the public internet to a program running on your local machine. It gives you a public URL that you can share, which connects directly to your local project.</p>
                            <p class="text-gray-600" data-translate-key="ngrok_desc_why">This service will create a secure public URL for our local n8n instance. Sign up for a free account to get your authentication token.</p>
                             <a href="https://dashboard.ngrok.com/signup" target="_blank" class="text-blue-600 font-semibold mt-2 inline-block">
                                <span data-translate-key="signup_ngrok">Sign Up for Ngrok</span> →
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 1: Local n8n Setup -->
            <section id="local-setup">
                <div class="step-card">
                    <div class="flex items-start mb-4">
                        <div class="step-number">1</div>
                        <h2 class="text-2xl font-bold text-gray-900 ml-4 rtl:mr-4 rtl:ml-0" data-translate-key="step1_title">Run n8n Locally with Docker</h2>
                    </div>
                    <p class="text-gray-600 mb-6" data-translate-key="step1_desc">First, we'll create a project folder and a `docker-compose.yml` file. This file tells Docker exactly how to set up and run n8n in a container, keeping your workflows and data saved locally.</p>
                    
                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step1_1_title">1.1: Create a Project Directory</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step1_1_desc">Open your terminal or command prompt and run these commands to create a folder for the project and navigate into it.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>mkdir n8n-docker-guide && cd n8n-docker-guide</code>
                    </div>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step1_2_title">1.2: Create the `docker-compose.yml` File</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step1_2_desc">Inside the `n8n-docker-guide` folder, create a new file named `docker-compose.yml` and paste the following content into it. This configuration defines the n8n service and a volume to persist your data.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
<pre><code>services:
  n8n:
    image: docker.n8n.io/n8nio/n8n
    container_name: n8n
    restart: always
    ports:
      - 5678:5678
    environment:
      - N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true
      - GENERIC_TIMEZONE=Africa/Casablanca
      - N8N_DEFAULT_BINARY_DATA_MODE=filesystem
    volumes:
      - n8n_data:/home/node/.n8n

volumes:
  n8n_data:
</code></pre>
                    </div>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step1_3_title">1.3: Launch n8n</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step1_3_desc">With Docker Desktop running, execute the following command in your terminal. The `-d` flag runs the container in the background.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>docker-compose up -d</code>
                    </div>
                    
                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step1_4_title">1.4: Verify Your Setup</h3>
                    <p class="text-gray-600" data-translate-key="step1_4_desc">Open your web browser and navigate to <a href="http://localhost:5678" target="_blank" class="text-blue-600 font-semibold hover:underline">http://localhost:5678</a>. You should see the n8n setup screen. Congratulations, n8n is running locally!</p>
                </div>
            </section>

            <!-- Step 2: Ngrok Setup -->
            <section id="ngrok-setup">
                <div class="step-card">
                    <div class="flex items-start mb-4">
                        <div class="step-number">2</div>
                        <h2 class="text-2xl font-bold text-gray-900 ml-4 rtl:mr-4 rtl:ml-0" data-translate-key="step2_title">Expose to the Internet with Ngrok</h2>
                    </div>
                    <p class="text-gray-600 mb-6" data-translate-key="step2_desc">Now we will use Ngrok to create a secure public URL that tunnels to your local n8n instance. This allows webhooks and external services to reach your workflows.</p>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step2_1_title">2.1: Configure Your Ngrok Authtoken</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step2_1_desc">Find your authtoken on the <a href="https://dashboard.ngrok.com/get-started/your-authtoken" target="_blank" class="text-blue-600 font-semibold hover:underline" data-translate-key="ngrok_dashboard">Ngrok Dashboard</a>. Run the following command in your terminal, replacing `YOUR_TOKEN` with your actual token. This only needs to be done once.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>ngrok config add-authtoken YOUR_TOKEN</code>
                    </div>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step2_2_title">2.2: Get a Static Domain (Optional, but Recommended)</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step2_2_desc">For a consistent URL, claim a free static domain from the <a href="https://dashboard.ngrok.com/cloud-edge/domains" target="_blank" class="text-blue-600 font-semibold hover:underline" data-translate-key="ngrok_domains_page">Ngrok Domains page</a>. This prevents your URL from changing every time you restart Ngrok.</p>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step2_3_title">2.3: Start the Ngrok Tunnel</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step2_3_desc">Run this command to start the tunnel. Replace `your-domain.ngrok-free.app` with the static domain you just claimed. This command tells Ngrok to forward traffic from your public domain to your local port 5678.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>ngrok http 5678 --domain=your-domain.ngrok-free.app</code>
                    </div>
                    <p class="text-gray-600" data-translate-key="step2_3_desc2">Your terminal will show a screen with your public URL. Keep this terminal window open! Closing it will stop the tunnel.</p>
                </div>
            </section>

            <!-- Step 3: Final Configuration -->
            <section id="final-config">
                <div class="step-card">
                    <div class="flex items-start mb-4">
                        <div class="step-number">3</div>
                        <h2 class="text-2xl font-bold text-gray-900 ml-4 rtl:mr-4 rtl:ml-0" data-translate-key="step3_title">Update n8n Configuration</h2>
                    </div>
                    <p class="text-gray-600 mb-6" data-translate-key="step3_desc">The final step is to tell your n8n container about its new public address. This is crucial for webhooks to generate the correct URL.</p>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step3_1_title">3.1: Stop the n8n Container</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step3_1_desc">Go back to the terminal window for your n8n project (not the Ngrok one) and run this command to shut down the container.</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>docker-compose down</code>
                    </div>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step3_2_title">3.2: Update `docker-compose.yml`</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step3_2_desc">Edit your `docker-compose.yml` file again. Add the two new environment variables shown below: `N8N_EDITOR_BASE_URL` and `WEBHOOK_URL`. **Make sure to replace the placeholder URL with your actual Ngrok static domain.**</p>
                    <div class="code-block mb-6">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
<pre><code>services:
  n8n:
    image: docker.n8n.io/n8nio/n8n
    container_name: n8n
    restart: always
    ports:
      - 5678:5678
    environment:
      - N8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true
      - N8N_EDITOR_BASE_URL=https://your-domain.ngrok-free.app/
      - WEBHOOK_URL=https://your-domain.ngrok-free.app/
      - GENERIC_TIMEZONE=Africa/Casablanca
      - N8N_DEFAULT_BINARY_DATA_MODE=filesystem
    volumes:
      - n8n_data:/home/node/.n8n

volumes:
  n8n_data:
</code></pre>
                    </div>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step3_3_title">3.3: Relaunch n8n</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step3_3_desc">Start the container again with the updated configuration.</p>
                    <div class="code-block">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>docker-compose up -d</code>
                    </div>
                </div>
            </section>
            
            <!-- Final Result -->
            <section id="final-result">
                <div class="text-center bg-white rounded-lg shadow-lg p-8 md:p-12 max-w-4xl mx-auto border-t-4 border-blue-500">
                    <h2 class="text-3xl font-black text-gray-900 mb-4" data-translate-key="final_title">You're Live! ✅</h2>
                    <p class="text-lg text-gray-600 mb-6" data-translate-key="final_desc">Your n8n instance is now running locally and is securely accessible from the internet via your Ngrok URL. You can now build workflows that connect to public APIs and receive webhooks.</p>
                    <div class="code-block text-center text-lg tracking-wider inline-block bg-blue-50 text-blue-800">
                        https://your-domain.ngrok-free.app
                    </div>
                </div>
            </section>

            <!-- Step 4: Shutdown -->
            <section id="shutdown">
                <div class="step-card">
                    <div class="flex items-start mb-4">
                        <div class="step-number">4</div>
                        <h2 class="text-2xl font-bold text-gray-900 ml-4 rtl:mr-4 rtl:ml-0" data-translate-key="step4_title">Shutting Down</h2>
                    </div>
                    <p class="text-gray-600 mb-6" data-translate-key="step4_desc">When you're finished, it's important to properly shut down the services to free up resources.</p>
                    
                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step4_1_title">4.1: Stop the Ngrok Tunnel</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step4_1_desc">Go to the terminal window where Ngrok is running and press `Ctrl + C` to stop the tunnel. Your public URL will no longer be active.</p>

                    <h3 class="font-bold text-lg text-gray-800 mb-2" data-translate-key="step4_2_title">4.2: Stop the n8n Container</h3>
                    <p class="text-gray-600 mb-4" data-translate-key="step4_2_desc">In the terminal for your n8n project, run the following command. This will stop and remove the n8n container. Your data will remain safe in the Docker volume.</p>
                    <div class="code-block">
                        <button class="copy-button" onclick="copyCode(this)" data-translate-key="copy">Copy</button>
                        <code>docker-compose down</code>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-gray-500" data-translate-key="footer_copyright">&copy; 2025 Data Maroc Community. All Rights Reserved.</p>
            <p class="text-sm text-gray-400 mt-1" data-translate-key="footer_disclaimer">This guide is for informational purposes.</p>
        </footer>

    </div>
    
    <script>
        const translations = {
            en: {
                main_title: "Deploy n8n Locally and Share Publicly",
                main_subtitle: "A Detailed Step-by-Step Guide",
                step0_title: "Prerequisites: Install Software",
                step0_desc: "Before we begin, you need to download and install Docker Desktop and sign up for a free Ngrok account. These tools are the foundation of our setup.",
                docker_title: "Docker Desktop",
                docker_desc_what: "<strong>What it is:</strong> Docker is a platform that puts applications into \"containers.\" Think of a container as a lightweight, standalone package that has everything the application needs to run: code, tools, and settings. This ensures it works the same everywhere.",
                docker_desc_why: "The tool to build and run our n8n container. Download the correct version for your operating system (Windows, Mac, or Linux).",
                download_docker: "Download Docker",
                ngrok_title: "Ngrok Account",
                ngrok_desc_what: "<strong>What it is:</strong> Ngrok is a service that creates a secure \"tunnel\" from the public internet to a program running on your local machine. It gives you a public URL that you can share, which connects directly to your local project.",
                ngrok_desc_why: "This service will create a secure public URL for our local n8n instance. Sign up for a free account to get your authentication token.",
                signup_ngrok: "Sign Up for Ngrok",
                step1_title: "Run n8n Locally with Docker",
                step1_desc: "First, we'll create a project folder and a `docker-compose.yml` file. This file tells Docker exactly how to set up and run n8n in a container, keeping your workflows and data saved locally.",
                step1_1_title: "1.1: Create a Project Directory",
                step1_1_desc: "Open your terminal or command prompt and run these commands to create a folder for the project and navigate into it.",
                step1_2_title: "1.2: Create the `docker-compose.yml` File",
                step1_2_desc: "Inside the `n8n-docker-guide` folder, create a new file named `docker-compose.yml` and paste the following content into it. This configuration defines the n8n service and a volume to persist your data.",
                step1_3_title: "1.3: Launch n8n",
                step1_3_desc: "With Docker Desktop running, execute the following command in your terminal. The `-d` flag runs the container in the background.",
                step1_4_title: "1.4: Verify Your Setup",
                step1_4_desc: "Open your web browser and navigate to <a href='http://localhost:5678' target='_blank' class='text-blue-600 font-semibold hover:underline'>http://localhost:5678</a>. You should see the n8n setup screen. Congratulations, n8n is running locally!",
                step2_title: "Expose to the Internet with Ngrok",
                step2_desc: "Now we will use Ngrok to create a secure public URL that tunnels to your local n8n instance. This allows webhooks and external services to reach your workflows.",
                step2_1_title: "2.1: Configure Your Ngrok Authtoken",
                step2_1_desc: "Find your authtoken on the <a href='https://dashboard.ngrok.com/get-started/your-authtoken' target='_blank' class='text-blue-600 font-semibold hover:underline' data-translate-key='ngrok_dashboard'>Ngrok Dashboard</a>. Run the following command in your terminal, replacing `YOUR_TOKEN` with your actual token. This only needs to be done once.",
                ngrok_dashboard: "Ngrok Dashboard",
                step2_2_title: "2.2: Get a Static Domain (Optional, but Recommended)",
                step2_2_desc: "For a consistent URL, claim a free static domain from the <a href='https://dashboard.ngrok.com/cloud-edge/domains' target='_blank' class='text-blue-600 font-semibold hover:underline' data-translate-key='ngrok_domains_page'>Ngrok Domains page</a>. This prevents your URL from changing every time you restart Ngrok.",
                ngrok_domains_page: "Ngrok Domains page",
                step2_3_title: "2.3: Start the Ngrok Tunnel",
                step2_3_desc: "Run this command to start the tunnel. Replace `your-domain.ngrok-free.app` with the static domain you just claimed. This command tells Ngrok to forward traffic from your public domain to your local port 5678.",
                step2_3_desc2: "Your terminal will show a screen with your public URL. Keep this terminal window open! Closing it will stop the tunnel.",
                step3_title: "Update n8n Configuration",
                step3_desc: "The final step is to tell your n8n container about its new public address. This is crucial for webhooks to generate the correct URL.",
                step3_1_title: "3.1: Stop the n8n Container",
                step3_1_desc: "Go back to the terminal window for your n8n project (not the Ngrok one) and run this command to shut down the container.",
                step3_2_title: "3.2: Update `docker-compose.yml`",
                step3_2_desc: "Edit your `docker-compose.yml` file again. Add the two new environment variables shown below: `N8N_EDITOR_BASE_URL` and `WEBHOOK_URL`. **Make sure to replace the placeholder URL with your actual Ngrok static domain.**",
                step3_3_title: "3.3: Relaunch n8n",
                step3_3_desc: "Start the container again with the updated configuration.",
                final_title: "You're Live! ✅",
                final_desc: "Your n8n instance is now running locally and is securely accessible from the internet via your Ngrok URL. You can now build workflows that connect to public APIs and receive webhooks.",
                step4_title: "Shutting Down",
                step4_desc: "When you're finished, it's important to properly shut down the services to free up resources.",
                step4_1_title: "4.1: Stop the Ngrok Tunnel",
                step4_1_desc: "Go to the terminal window where Ngrok is running and press `Ctrl + C` to stop the tunnel. Your public URL will no longer be active.",
                step4_2_title: "4.2: Stop the n8n Container",
                step4_2_desc: "In the terminal for your n8n project, run the following command. This will stop and remove the n8n container. Your data will remain safe in the Docker volume.",
                footer_copyright: "&copy; 2025 Data Maroc Community. All Rights Reserved.",
                footer_disclaimer: "This guide is for informational purposes.",
                copy: "Copy",
                copied: "Copied!",
                error: "Error"
            },
            ar: {
                main_title: "نشر n8n محليًا ومشاركته للعامة",
                main_subtitle: "دليل مفصل خطوة بخطوة",
                step0_title: "المتطلبات الأساسية: تثبيت البرامج",
                step0_desc: "قبل أن نبدأ، تحتاج إلى تنزيل وتثبيت Docker Desktop والتسجيل للحصول على حساب Ngrok مجاني. هذه الأدوات هي أساس إعدادنا.",
                docker_title: "Docker Desktop",
                docker_desc_what: "<strong>ما هو:</strong> Docker هي منصة تضع التطبيقات في \"حاويات\". فكر في الحاوية كحزمة خفيفة الوزن ومستقلة تحتوي على كل ما يحتاجه التطبيق للعمل: الكود والأدوات والإعدادات. هذا يضمن أنه يعمل بنفس الطريقة في كل مكان.",
                docker_desc_why: "الأداة اللازمة لبناء وتشغيل حاوية n8n الخاصة بنا. قم بتنزيل الإصدار الصحيح لنظام التشغيل الخاص بك (Windows أو Mac أو Linux).",
                download_docker: "تنزيل Docker",
                ngrok_title: "حساب Ngrok",
                ngrok_desc_what: "<strong>ما هو:</strong> Ngrok هي خدمة تنشئ \"نفقًا\" آمنًا من الإنترنت العام إلى برنامج يعمل على جهازك المحلي. يمنحك عنوان URL عامًا يمكنك مشاركته، والذي يتصل مباشرة بمشروعك المحلي.",
                ngrok_desc_why: "ستقوم هذه الخدمة بإنشاء عنوان URL عام آمن لمثيل n8n المحلي الخاص بنا. قم بالتسجيل للحصول على حساب مجاني للحصول على رمز المصادقة الخاص بك.",
                signup_ngrok: "التسجيل في Ngrok",
                step1_title: "تشغيل n8n محليًا باستخدام Docker",
                step1_desc: "أولاً، سنقوم بإنشاء مجلد للمشروع وملف `docker-compose.yml`. يخبر هذا الملف Docker بالضبط كيفية إعداد وتشغيل n8n في حاوية، مع الحفاظ على سير عملك وبياناتك محفوظة محليًا.",
                step1_1_title: "1.1: إنشاء مجلد المشروع",
                step1_1_desc: "افتح الطرفية أو موجه الأوامر وقم بتشغيل هذه الأوامر لإنشاء مجلد للمشروع والانتقال إليه.",
                step1_2_title: "1.2: إنشاء ملف `docker-compose.yml`",
                step1_2_desc: "داخل مجلد `n8n-docker-guide`، قم بإنشاء ملف جديد باسم `docker-compose.yml` والصق المحتوى التالي فيه. يحدد هذا التكوين خدمة n8n ووحدة تخزين للحفاظ على بياناتك.",
                step1_3_title: "1.3: إطلاق n8n",
                step1_3_desc: "مع تشغيل Docker Desktop، نفذ الأمر التالي في الطرفية. العلامة `-d` تشغل الحاوية في الخلفية.",
                step1_4_title: "1.4: التحقق من الإعداد",
                step1_4_desc: "افتح متصفح الويب الخاص بك وانتقل إلى <a href='http://localhost:5678' target='_blank' class='text-blue-600 font-semibold hover:underline'>http://localhost:5678</a>. يجب أن ترى شاشة إعداد n8n. تهانينا، n8n يعمل محليًا!",
                step2_title: "العرض على الإنترنت باستخدام Ngrok",
                step2_desc: "الآن سوف نستخدم Ngrok لإنشاء عنوان URL عام آمن ينقل إلى مثيل n8n المحلي الخاص بك. هذا يسمح للخطافات الشبكية والخدمات الخارجية بالوصول إلى مهام سير العمل الخاصة بك.",
                step2_1_title: "2.1: تكوين رمز المصادقة الخاص بـ Ngrok",
                step2_1_desc: "ابحث عن رمز المصادقة الخاص بك في <a href='https://dashboard.ngrok.com/get-started/your-authtoken' target='_blank' class='text-blue-600 font-semibold hover:underline' data-translate-key='ngrok_dashboard'>لوحة تحكم Ngrok</a>. قم بتشغيل الأمر التالي في الطرفية، مع استبدال `YOUR_TOKEN` بالرمز الفعلي الخاص بك. يجب القيام بذلك مرة واحدة فقط.",
                ngrok_dashboard: "لوحة تحكم Ngrok",
                step2_2_title: "2.2: الحصول على نطاق ثابت (اختياري، لكن موصى به)",
                step2_2_desc: "للحصول على عنوان URL ثابت، اطلب نطاقًا ثابتًا مجانيًا من <a href='https://dashboard.ngrok.com/cloud-edge/domains' target='_blank' class='text-blue-600 font-semibold hover:underline' data-translate-key='ngrok_domains_page'>صفحة نطاقات Ngrok</a>. هذا يمنع تغيير عنوان URL الخاص بك في كل مرة تعيد فيها تشغيل Ngrok.",
                ngrok_domains_page: "صفحة نطاقات Ngrok",
                step2_3_title: "2.3: بدء نفق Ngrok",
                step2_3_desc: "قم بتشغيل هذا الأمر لبدء النفق. استبدل `your-domain.ngrok-free.app` بالنطاق الثابت الذي طلبته للتو. يخبر هذا الأمر Ngrok بإعادة توجيه حركة المرور من نطاقك العام إلى المنفذ المحلي 5678.",
                step2_3_desc2: "ستعرض الطرفية شاشة بها عنوان URL العام الخاص بك. أبقِ نافذة الطرفية هذه مفتوحة! إغلاقها سيوقف النفق.",
                step3_title: "تحديث تكوين n8n",
                step3_desc: "الخطوة الأخيرة هي إخبار حاوية n8n بعنوانها العام الجديد. هذا أمر حاسم للخطافات الشبكية لإنشاء عنوان URL الصحيح.",
                step3_1_title: "3.1: إيقاف حاوية n8n",
                step3_1_desc: "ارجع إلى نافذة الطرفية الخاصة بمشروع n8n (وليس نافذة Ngrok) وقم بتشغيل هذا الأمر لإيقاف الحاوية.",
                step3_2_title: "3.2: تحديث `docker-compose.yml`",
                step3_2_desc: "حرر ملف `docker-compose.yml` مرة أخرى. أضف متغيري البيئة الجديدين الموضحين أدناه: `N8N_EDITOR_BASE_URL` و `WEBHOOK_URL`. **تأكد من استبدال عنوان URL المؤقت بنطاق Ngrok الثابت الفعلي الخاص بك.**",
                step3_3_title: "3.3: إعادة تشغيل n8n",
                step3_3_desc: "ابدأ الحاوية مرة أخرى بالتكوين المحدث.",
                final_title: "أنت مباشر الآن! ✅",
                final_desc: "يعمل مثيل n8n الخاص بك الآن محليًا ويمكن الوصول إليه بشكل آمن من الإنترنت عبر عنوان URL الخاص بـ Ngrok. يمكنك الآن إنشاء مهام سير عمل تتصل بواجهات برمجة التطبيقات العامة وتستقبل الخطافات الشبكية.",
                step4_title: "إيقاف التشغيل",
                step4_desc: "عندما تنتهي، من المهم إيقاف تشغيل الخدمات بشكل صحيح لتحرير الموارد.",
                step4_1_title: "4.1: إيقاف نفق Ngrok",
                step4_1_desc: "انتقل إلى نافذة الطرفية حيث يعمل Ngrok واضغط على `Ctrl + C` لإيقاف النفق. لن يكون عنوان URL العام الخاص بك نشطًا بعد الآن.",
                step4_2_title: "4.2: إيقاف حاوية n8n",
                step4_2_desc: "في الطرفية الخاصة بمشروع n8n الخاص بك، قم بتشغيل الأمر التالي. سيؤدي هذا إلى إيقاف وإزالة حاوية n8n. ستبقى بياناتك آمنة في وحدة تخزين Docker.",
                footer_copyright: "© 2025 مجتمع داتا ماروك. جميع الحقوق محفوظة.",
                footer_disclaimer: "هذا الدليل للأغراض الإعلامية.",
                copy: "نسخ",
                copied: "تم النسخ!",
                error: "خطأ"
            }
        };

        let currentLang = 'en';

        function translatePage(lang) {
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.getAttribute('data-translate-key');
                if (translations[lang] && translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });
        }

        document.getElementById('translateBtn').addEventListener('click', () => {
            if (currentLang === 'en') {
                currentLang = 'ar';
                document.documentElement.lang = 'ar';
                document.documentElement.dir = 'rtl';
                document.documentElement.classList.add('rtl');
                document.getElementById('translateBtn').innerText = 'English';
            } else {
                currentLang = 'en';
                document.documentElement.lang = 'en';
                document.documentElement.dir = 'ltr';
                document.documentElement.classList.remove('rtl');
                document.getElementById('translateBtn').innerText = 'العربية';
            }
            translatePage(currentLang);
        });

        function copyCode(button) {
            const codeBlock = button.parentElement;
            const code = codeBlock.querySelector('code, pre code');
            const textToCopy = code.innerText;
            const originalText = button.innerText;
            const copyKey = originalText === translations.ar.copy ? 'copy' : 'copy';


            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            textArea.style.position = 'absolute';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            
            try {
                textArea.select();
                document.execCommand('copy');
                button.innerText = translations[currentLang]['copied'];
            } catch (err) {
                console.error('Failed to copy text: ', err);
                button.innerText = translations[currentLang]['error'];
            } finally {
                document.body.removeChild(textArea);
            }

            setTimeout(() => {
                button.innerText = translations[currentLang][copyKey];
            }, 2000);
        }
    </script>
</body>
</html>
